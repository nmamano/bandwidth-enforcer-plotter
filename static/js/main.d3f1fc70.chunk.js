(this["webpackJsonpbandwidth-enforcer-plotter"]=this["webpackJsonpbandwidth-enforcer-plotter"]||[]).push([[0],{169:function(e,t,n){},170:function(e,t,n){},305:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),i=n.n(r),o=n(75),l=n.n(o),c=(n(169),n(9)),s=n(104),d=(n(170),n(28)),u=n(310),h=n(309),f=n(148),j=n(155),m=n(156),b=n(83),p=n(159),v="red",x=n(158),g=function(e){var t=[];t.push(e[0]);for(var n=1;n<e.length;n+=1)e[n][0]===e[n-1][0]&&e[n][1]===e[n-1][1]||t.push(e[n]);var a=[];a.push(t[0]);for(var r=1;r<t.length-1;r+=1)if(t[r-1][0]!==t[r+1][0])if(t[r-1][0]!==t[r][0]&&t[r][0]!==t[r+1][0]){var i=(t[r][1]-t[r-1][1])/(t[r][0]-t[r-1][0]);if(t[r+1][0]===1/0)0!==i&&a.push(t[r]);else if(t[r+1][1]===1/0)a.push(t[r]);else{var o=(t[r+1][1]-t[r][1])/(t[r+1][0]-t[r][0]);Math.abs(i-o)>1e-7&&a.push(t[r])}}else a.push(t[r]);return a.push(t[t.length-1]),a},O=function(e,t,n,a){for(var r=[],i=0;i<a-1;i++)r[i]=[[0,0]];return r.push([[1/0,0]]),{name:e,color:t,estimatedDemand:n,allocLevels:r}},y=function(e,t){for(var n=[],a=0,r=0,i=e.allocLevels,o=0;o<t.length;o++){n.push([a,r]);for(var l=0,s=0;s<i[o].length;s++){var d=Object(c.a)(i[o][s],2),u=d[0],h=d[1],f=Math.min(u-l,e.estimatedDemand-r);l=u,h>0&&(a+=f/h,r+=f,n.push([a,r]))}a=t[o].maxFairShare}return n.push([1/0,r]),g(n)},k=function(e,t){if(t===1/0)return e[e.length-1][1];for(var n=0;e[n][0]<t;)n++;return e[n][0]===t||e[n][0]===1/0?e[n][1]:function(e,t,n){var a=Object(c.a)(t,2),r=a[0],i=a[1],o=Object(c.a)(n,2),l=o[0];return i+(e-r)*(o[1]-i)/(l-r)}(t,e[n-1],e[n])},w=function(e,t){for(var n=0,a=0;a<e.length;a++)n+=k(e[a],t);return n},S=function(e){var t=function(e){for(var t=new Set,n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++)t.add(e[n][a][0]);var r=Array.from(t);return r.sort((function(e,t){return e-t})),console.assert(r[r.length-1]===1/0),r}(e).map((function(t){return[t,w(e,t)]}));return g(t)},L=function(e){var t=S(e);return e.map((function(e){return function(e){var n=t.map((function(t){var n=Object(c.a)(t,2),a=n[0];return[n[1],k(e,a)]}));return n.push([1/0,n[n.length-1][1]]),g(n)}(e)}))},T=function(e,t,n,a,r,i){var o=e.allocLevels[n].map((function(e){return Object(x.a)(e)})),l=r?1:0;return o[a][l]+=i?1:-1,function(e){if(e[e.length-1][0]===1/0)return 1/0;for(var t=0,n=0,a=0;a<e.length;a++){var r=Object(c.a)(e[a],2),i=r[0],o=r[1],l=i-n;n=i,o>0&&(t+=l/o)}return t}(o)>function(e,t){if(t===e.length-1)return 1/0;var n=e[t];return 0===t?n.maxFairShare:n.maxFairShare-e[t-1].maxFairShare}(t,n)};var C=function(e){for(var t=e.flowGroup,n=e.allocLevels,r=y(t,n),i=r.reduce((function(e,t){var n=Object(c.a)(t,2),a=n[0];n[1];return a===1/0?e:Math.max(e,a+1)}),5),o=r.map((function(e,t){var n=Object(c.a)(e,2),a=n[0],o=n[1],l=0===t?0:r[t-1][1];return console.assert(a!==1/0||o===l,o,l),a===1/0?{fs:i,bw:l}:{fs:a,bw:o}})),l=Math.max(t.estimatedDemand+5,25),s=[],d=0;d<=l;d+=5)s.push(d);for(var x=[],g=0;g<=i;g+=.5)x.push(g);return Object(a.jsxs)(u.a,{width:420,height:230,margin:{top:5,right:5,left:5,bottom:5},children:[Object(a.jsx)(h.a,{}),n.map((function(e,t){return Object(a.jsx)(f.a,{x:e.maxFairShare,stroke:v,label:{value:e.name+" alloc.",position:"insideTopRight",fill:v},strokeDasharray:"3 3",strokeWidth:.8},t)})),Object(a.jsx)(j.a,{type:"number",dataKey:"fs",domain:[0,i],label:{value:"Fair Share",position:"insideBottom"},height:40,ticks:x}),Object(a.jsx)(m.a,{type:"number",dataKey:"bw",domain:[0,l],label:{value:"Allocated Bandwidth",position:"insideLeft",style:{textAnchor:"middle"},angle:-90},width:40,ticks:s}),Object(a.jsx)(b.a,{}),Object(a.jsx)(p.a,{name:"Fair Share",data:o,fill:t.color,line:{strokeWidth:2.5}}),Object(a.jsx)(f.a,{y:t.estimatedDemand,label:{value:"Est. demand",fill:t.color,position:"insideBottomRight"},stroke:t.color,strokeDasharray:"3 3",strokeWidth:.8,isFront:!0})]})},D=n(55);var B=function(e){var t=e.value,n=e.text,i=e.min,o=e.max,l=e.onDec,s=e.onInc,d=e.width,u=e.thickBottom,h=e.thickRight,f=e.disabled,j=e.disabledInc,m=e.disabledDec,b="1px solid black",p="2px solid black",v={borderBottom:u?p:b,borderRight:h?p:b,textAlign:"center",display:"grid",gridTemplateRows:"auto",gridTemplateColumns:"16px ".concat(d-32,"px 16px"),justifyItems:"stretch",alignItems:"stretch",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"},x=Object(r.useState)(!1),g=Object(c.a)(x,2),O=g[0],y=g[1],k=Object(r.useState)(!1),w=Object(c.a)(k,2),S=w[0],L=w[1],T="#e5e5e5",C="#d0d0d0",D="#fafafa",B="#a5a5a5",I=f||j||t+1>o,A=f||m||t-1<i;return Object(a.jsxs)("div",{style:v,children:[Object(a.jsx)("div",{style:{borderRight:b,color:A?B:"black",backgroundColor:A?D:O?C:T,cursor:A?"not-allowed":"pointer"},onMouseEnter:function(){return y(!0)},onMouseLeave:function(){return y(!1)},onClick:function(){A||l()},children:"-"}),Object(a.jsx)("div",{style:{backgroundColor:"#f6f6f6",alignItems:"stretch",padding:"0.2em"},children:n||(t===1/0?"\u221e":t)}),Object(a.jsx)("div",{style:{borderLeft:b,borderRight:h?p:b,color:I?B:"black",backgroundColor:I?D:S?C:T,cursor:I?"not-allowed":"pointer"},onMouseEnter:function(){return L(!0)},onMouseLeave:function(){return L(!1)},onClick:function(){I||s()},children:"+"})]})};var I=function(e){var t=e.flowGroup,n=e.allocLevels,r=e.handleEstDemand,i=e.handleNumWeightThresholds,o=e.handleWeightThreshold,l=90,s="1px solid black",u="2px solid black",h={borderTop:u,borderLeft:u},f={borderBottom:s,borderRight:s,textAlign:"center",justifySelf:"stretch",alignSelf:"stretch"},j=Object(d.a)({},f);j.fontWeight="bold",j.padding="0.2rem",j.borderBottom=u;var m=Object(d.a)({},j);m.color=t.color,m.borderRight=u;var b=Object(d.a)({},f);b.display="grid",b.gridTemplateRows="auto",b.gridTemplateColumns="1fr 20px 20px",b.alignItems="center";for(var p={justifySelf:"start"},v={cursor:"pointer",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none",fontSize:"18px",paddingTop:"0.2rem"},x="".concat(t.name),g=Object(a.jsx)("div",{style:m,children:x}),O=Object(a.jsx)("div",{style:j,children:"Est. Bandwidth"}),y=Object(a.jsx)(B,{value:t.estimatedDemand,min:0,max:20,onInc:function(){r(!0)},onDec:function(){r(!1)},width:l,thickBottom:!0,thickRight:!0}),k=Object(a.jsxs)("div",{style:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"1fr ".concat(l,"px"),justifyItems:"stretch",alignItems:"stretch",justifyContent:"stretch",width:"".concat(320,"px")},children:[O,y]}),w=["Allocation level","Weight","Bandwidth"],S=w.map((function(e,t){var n=Object(d.a)({},j);return t===w.length-1&&(n.borderRight=u),Object(a.jsx)("div",{style:n,children:e},"h".concat(t))})),L=[],C=1,I=function(e){C+=t.allocLevels[e].length;for(var r=Object(a.jsx)("div",{style:v,onClick:function(){return i(e,!0)},children:Object(a.jsx)(D.a,{})}),s=Object(a.jsx)("div",{style:v,onClick:function(){return i(e,!1)},children:Object(a.jsx)(D.b,{})}),h=function(i){var h=0===i,f=i===t.allocLevels[e].length-1,j=f&&!h,m=f&&i<5,v=Object(c.a)(t.allocLevels[e][i],2),x=v[0],g=v[1],O=h?n[e].name:"",y=Object(d.a)({},b);y.borderBottom=f?u:void 0;var k=Object(a.jsxs)("div",{style:y,children:[Object(a.jsx)("div",{style:p,children:O}),j?s:Object(a.jsx)("div",{}),m?r:Object(a.jsx)("div",{})]},"a".concat(e,"_").concat(i)),w=h?100:t.allocLevels[e][i-1][1],S=f?0:t.allocLevels[e][i+1][1],C=Object(a.jsx)(B,{value:g,min:S,max:w,onInc:function(){o(e,i,!0,!0)},onDec:function(){o(e,i,!0,!1)},disabledInc:T(t,n,e,i,!0,!0),disabledDec:T(t,n,e,i,!0,!1),width:l,thickBottom:f},"w".concat(e,"_").concat(i)),D=f?100:t.allocLevels[e][i+1][0],I=h?0:t.allocLevels[e][i-1][0],A=Object(a.jsx)(B,{value:x,text:Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{style:{color:"gray"},children:"".concat(I,"-")}),Object(a.jsx)("span",{children:"".concat(x===1/0?"\u221e":x)})]}),min:I,max:D,onInc:function(){o(e,i,!1,!0)},onDec:function(){o(e,i,!1,!1)},disabled:x===1/0||0===g,disabledInc:T(t,n,e,i,!1,!0),disabledDec:T(t,n,e,i,!1,!1),width:l,thickBottom:f,thickRight:!0},"b".concat(e,"_").concat(i));L.push(k),L.push(C),L.push(A)},f=0;f<t.allocLevels[e].length;f++)h(f)},A=0;A<n.length;A++)I(A);var R=Object(a.jsxs)("div",{style:{display:"grid",gridTemplateRows:"repeat(".concat(C,", 1fr)"),gridTemplateColumns:"1fr ".concat(l,"px ").concat(l,"px"),justifyItems:"stretch",alignItems:"stretch",justifyContent:"stretch",width:"".concat(320,"px")},children:[S.map((function(e){return e})),L.map((function(e){return e}))]});return Object(a.jsxs)("div",{style:h,children:[g,k,R]})};var A=function(e){var t=e.flowGroups,n=e.allocLevels,r=e.handleEstDemand,i=e.handleNumWeightThresholds,o=e.handleWeightThreshold,l=e.handleNumFlowGroups,c={justifySelf:"start",cursor:"pointer",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"},s=Object(d.a)({},c);s.justifySelf="end";var u=Object(a.jsx)("div",{style:c,onClick:function(){return l(!0)},children:Object(a.jsx)(D.a,{})}),h=Object(a.jsx)("div",{style:s,onClick:function(){return l(!1)},children:Object(a.jsx)(D.b,{})}),f={display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"auto auto",columnGap:"10px",alignItems:"center"};return Object(a.jsxs)("div",{children:[t.map((function(e,t){return Object(a.jsxs)("div",{style:f,children:[Object(a.jsx)(I,{flowGroup:e,allocLevels:n,handleEstDemand:function(e){return r(t,e)},handleNumWeightThresholds:function(e,n){return i(t,e,n)},handleWeightThreshold:function(e,n,a,r){return o(t,e,n,a,r)}}),Object(a.jsx)(C,{flowGroup:e,allocLevels:n})]},t)})),Object(a.jsxs)("div",{style:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 2fr",columnGap:"20px",justifyItems:"start",alignItems:"center",justifyContent:"start",fontSize:"24px"},children:[t.length>1?h:Object(a.jsx)("div",{}),t.length<6?u:Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})]})};var R=function(e){for(var t=e.flowGroups,n=e.allocLevels,r=t.map((function(e){return y(e,n)})),i=S(r),o=i.reduce((function(e,t){var n=Object(c.a)(t,2),a=n[0];n[1];return a===1/0?e:Math.max(e,a+1)}),5),l=i.map((function(e,t){var n=Object(c.a)(e,2),a=n[0],r=n[1],l=0===t?0:i[t-1][1];return a===1/0?{fs:o,cap:l}:{fs:a,cap:r}})),s=t.reduce((function(e,t){return e+t.estimatedDemand}),0),d=Math.max(s+5,40),x=L(r).map((function(e){return e.map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return n===1/0?{cap:d,allocBw:a}:{cap:n,allocBw:a}}))})),g=[],O=0;O<=d;O+=2.5)g.push(O);for(var k=[],w=0;w<=o;w+=.5)k.push(w);for(var T=[],C=0;C<=25;C+=2.5)T.push(C);return Object(a.jsxs)(u.a,{width:644,height:390,name:"Available vs allocated bandwidth",margin:{top:5,right:5,left:5,bottom:5},children:[Object(a.jsx)(h.a,{}),Object(a.jsx)(j.a,{type:"number",dataKey:"cap",domain:[0,d],label:{value:"Link Capacity",position:"insideBottom"},height:40,name:"Link Capacity",ticks:g,minTickGap:2}),Object(a.jsx)(m.a,{type:"number",dataKey:"allocBw",domain:[0,o],name:"Allocated Bandwidth",label:{value:"Allocated Bandwidth",position:"insideLeft",style:{textAnchor:"middle"},angle:-90},width:50,ticks:T,orientation:"left",minTickGap:0,interval:0,yAxisId:"left"}),Object(a.jsx)(m.a,{type:"number",dataKey:"fs",domain:[0,o],name:"Fair Share",label:{value:"Fair Share",position:"insideRight",style:{textAnchor:"middle"},angle:-90},width:50,ticks:k,orientation:"right",minTickGap:0,interval:0,yAxisId:"right"}),Object(a.jsx)(b.a,{}),Object(a.jsx)(p.a,{name:"Fair Share",data:l,fill:v,line:{strokeWidth:2},shape:"cross",yAxisId:"right"}),x.map((function(e,n){return Object(a.jsx)(p.a,{name:"Allocated Bandwidth",data:e,fill:t[n].color,line:{strokeWidth:2.5},yAxisId:"left"},"ab".concat(n))})),t.map((function(e,t){return Object(a.jsx)(f.a,{y:e.estimatedDemand,yAxisId:"left",label:{value:"Est. demand",fill:e.color,position:"insideBottomLeft"},stroke:e.color,strokeDasharray:"3 3",strokeWidth:.8,isFront:!0},"ed".concat(t))})),n.map((function(e,t){return Object(a.jsx)(f.a,{y:e.maxFairShare,yAxisId:"right",stroke:v,label:{value:e.name+" alloc.",position:"insideTopRight",fill:v},strokeDasharray:"3 3",strokeWidth:.8},"alloc".concat(t))}))]})};var F=function(e){for(var t=e.flowGroups,n=e.allocLevels,r=t.map((function(e){return y(e,n)})),i=S(r),o=i.reduce((function(e,t){var n=Object(c.a)(t,2),a=n[0];n[1];return a===1/0?e:Math.max(e,a+1)}),5),l=t.reduce((function(e,t){return e+t.estimatedDemand}),0),s=Math.max(l+5,40),d=i.map((function(e,t){var n=Object(c.a)(e,2),a=n[0],r=n[1],l=0===t?0:i[t-1][1];return a===1/0?{fs:o,bw:l}:{fs:a,bw:r}})),x=[],g=0;g<=s;g+=5)x.push(g);for(var O=[],k=0;k<=o;k+=.5)O.push(k);return Object(a.jsxs)(u.a,{width:644,height:390,margin:{top:5,right:5,left:5,bottom:5},children:[Object(a.jsx)(h.a,{}),n.map((function(e,t){return Object(a.jsx)(f.a,{x:e.maxFairShare,stroke:v,label:{value:e.name+" alloc.",position:"insideTopRight",fill:v},strokeDasharray:"3 3",strokeWidth:.8},t)})),Object(a.jsx)(j.a,{type:"number",dataKey:"fs",domain:[0,o],label:{value:"Fair Share",position:"insideBottom"},height:40,ticks:O}),Object(a.jsx)(m.a,{type:"number",dataKey:"bw",domain:[0,s],label:{value:"Allocated Bandwidth",position:"insideLeft",style:{textAnchor:"middle"},angle:-90},width:40,ticks:x}),Object(a.jsx)(b.a,{}),Object(a.jsx)(p.a,{name:"Fair Share",data:d,fill:"black",line:{strokeWidth:2}}),Object(a.jsx)(f.a,{y:l,label:{value:"Est. demand",fill:"black",position:"insideBottomRight"},stroke:"black",strokeDasharray:"3 3",strokeWidth:.8,isFront:!0})]})};var W=function(e){for(var t=e.allocLevels,n=["Allocation Level","Fair Share"],r=[],i=0;i<t.length;i++){r.push(t[i].name);var o=0===i?0:t[i-1].maxFairShare,l=t[i].maxFairShare;r.push("".concat(o,"-").concat(l===1/0?"\u221e":l))}var c="2px solid black",s={borderTop:c,borderLeft:c},u={padding:"0.2em",borderBottom:c,borderRight:c,textAlign:"center"},h=Object(d.a)({},u);h.fontWeight="bold";for(var f=[],j=0;j<n.length;j+=1)f.push(Object(a.jsx)("div",{style:h,children:n[j]},"h".concat(j)));for(var m=0;m<r.length;m+=1)f.push(Object(a.jsx)("div",{style:u,children:r[m]},"e".concat(m)));return Object(a.jsx)("div",{style:s,children:Object(a.jsx)("div",{style:{display:"grid",gridTemplateRows:"repeat(".concat(t.length+1,", 1fr)"),gridTemplateColumns:"auto auto"},children:f.map((function(e){return e}))})})},G=function(){var e=O("flowGroup1","#6864b8",15,2);return e.allocLevels[1][0]=[10,20],e.allocLevels[1].push([1/0,5]),e},M=function(){var e=O("flowGroup2","#62aa7d",20,2);return e.allocLevels[0][0]=[10,10],e.allocLevels[1][0][1]=10,e},E=["#6864b8","#62aa7d","#DEA200","#CC33CC","#0061CD","#BC1E46"];var U=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(s.a)([{name:"Guaranteed",maxFairShare:2},{name:"Best Effort",maxFairShare:1/0}]),l=Object(c.a)(o,2),d=l[0],u=(l[1],Object(s.a)([G(),M()])),h=Object(c.a)(u,2),f=h[0],j=h[1],m={display:"grid",gridTemplateRows:"auto auto",gridTemplateColumns:"auto",rowGap:"20px",justifyItems:"center",alignItems:"center",justifyContent:"center"},b=m;return Object(a.jsxs)("div",{style:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"auto auto",columnGap:"20px",justifyItems:"start",alignItems:"center",justifyContent:"start",marginLeft:"15px",marginTop:"15px"},children:[Object(a.jsxs)("div",{style:m,children:[Object(a.jsx)(W,{allocLevels:d}),Object(a.jsx)(A,{flowGroups:f,allocLevels:d,handleEstDemand:function(e,t){j((function(n){var a=n[e];t?a.estimatedDemand<20&&(a.estimatedDemand+=1):a.estimatedDemand>0&&(a.estimatedDemand-=1)}))},handleNumWeightThresholds:function(e,t,n){j((function(a){var r=a[e],i=t===r.allocLevels.length-1,o=r.allocLevels[t],l=o.length;if(!n){if(l<2)return;return o.pop(),void(i&&(o[l-2][0]=1/0))}if(0===l)o.push([i?1/0:0,0]);else{var s=Object(c.a)(o[l-1],2),d=s[0],u=s[1];o.push([d,u]),i&&(o[l-1][0]=1===l?0:o[l-2][0])}}))},handleWeightThreshold:function(e,t,n,a,r){j((function(i){var o=i[e].allocLevels[t][n];r?a?o[1]+=1:o[0]+=1:a?o[1]-=1:o[0]-=1}))},handleNumFlowGroups:function(e){j((function(t){var n=t.length;if(e){if(6===n)return;t.push(O("flowGroup".concat(n+1),E[n],1,d.length))}else{if(1===n)return;t.pop()}}))}})]}),Object(a.jsxs)("div",{style:b,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{fontSize:"20px"},children:"Show Link Allocation"}),Object(a.jsx)("input",{style:{fontSize:"24px"},name:"showLinkAlloc",type:"checkbox",checked:n,onChange:function(){i(!n)}})]}),Object(a.jsx)("div",{style:{fontSize:"24px"},children:n?"Link allocation":"Bandwidth Aggregation"}),n&&Object(a.jsx)(R,{flowGroups:f,allocLevels:d}),!n&&Object(a.jsx)(F,{flowGroups:f,allocLevels:d})]})]})};l.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(U,{})}),document.getElementById("root"))}},[[305,1,2]]]);
//# sourceMappingURL=main.d3f1fc70.chunk.js.map