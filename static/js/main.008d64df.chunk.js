(this["webpackJsonpbandwidth-enforcer-plotter"]=this["webpackJsonpbandwidth-enforcer-plotter"]||[]).push([[0],{169:function(e,t,n){},170:function(e,t,n){},305:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),o=n.n(r),i=n(75),l=n.n(i),c=(n(169),n(11)),s=n(104),d=(n(170),n(28)),u=n(310),h=n(309),f=n(147),m=n(154),j=n(155),p=n(83),b=n(158),v="red",g=n(157),x=function(e){var t=[];t.push(e[0]);for(var n=1;n<e.length;n+=1)e[n][0]===e[n-1][0]&&e[n][1]===e[n-1][1]||t.push(e[n]);var a=[];a.push(t[0]);for(var r=1;r<t.length-1;r+=1)if(t[r-1][0]!==t[r+1][0])if(t[r-1][0]!==t[r][0]&&t[r][0]!==t[r+1][0]){var o=(t[r][1]-t[r-1][1])/(t[r][0]-t[r-1][0]);if(t[r+1][0]===1/0)0!==o&&a.push(t[r]);else if(t[r+1][1]===1/0)a.push(t[r]);else{var i=(t[r+1][1]-t[r][1])/(t[r+1][0]-t[r][0]);Math.abs(o-i)>1e-7&&a.push(t[r])}}else a.push(t[r]);return a.push(t[t.length-1]),a},O=function(e,t,n,a){for(var r=[],o=0;o<a-1;o++)r[o]=[[0,0]];return r.push([[1/0,0]]),{name:e,color:t,estimatedDemand:n,allocLevels:r}},y=function(e,t){for(var n=[],a=0,r=0,o=e.allocLevels,i=0;i<t.length;i++){n.push([a,r]);for(var l=0,s=0;s<o[i].length;s++){var d=Object(c.a)(o[i][s],2),u=d[0],h=d[1],f=Math.min(u-l,e.estimatedDemand-r);l=u,h>0&&(a+=f/h,r+=f,n.push([a,r]))}a=t[i].maxFairShare}return n.push([1/0,r]),x(n)},w=function(e,t){if(t===1/0)return e[e.length-1][1];for(var n=0;e[n][0]<t;)n++;return e[n][0]===t||e[n][0]===1/0?e[n][1]:function(e,t,n){var a=Object(c.a)(t,2),r=a[0],o=a[1],i=Object(c.a)(n,2),l=i[0];return o+(e-r)*(i[1]-o)/(l-r)}(t,e[n-1],e[n])},k=function(e,t){for(var n=0,a=0;a<e.length;a++)n+=w(e[a],t);return n},S=function(e){var t=function(e){for(var t=new Set,n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++)t.add(e[n][a][0]);var r=Array.from(t);return r.sort((function(e,t){return e-t})),console.assert(r[r.length-1]===1/0),r}(e).map((function(t){return[k(e,t),t]}));return x(t)},L=function(e){var t=S(e);return e.map((function(e){return function(e){var n=t.map((function(t){var n=Object(c.a)(t,2),a=n[0],r=n[1];return[a,w(e,r)]}));return n.push([1/0,n[n.length-1][1]]),x(n)}(e)}))},T=function(e,t,n,a,r,o){var i=e.allocLevels[n].map((function(e){return Object(g.a)(e)})),l=r?1:0;return i[a][l]+=o?1:-1,function(e){if(e[e.length-1][0]===1/0)return 1/0;for(var t=0,n=0,a=0;a<e.length;a++){var r=Object(c.a)(e[a],2),o=r[0],i=r[1],l=o-n;n=o,i>0&&(t+=l/i)}return t}(i)>function(e,t){if(t===e.length-1)return 1/0;var n=e[t];return 0===t?n.maxFairShare:n.maxFairShare-e[t-1].maxFairShare}(t,n)};var C=function(e){var t=e.flowGroup,n=e.allocLevels,r=y(t,n),o=r.reduce((function(e,t){var n=Object(c.a)(t,2),a=n[0];n[1];return a===1/0?e:Math.max(e,a+1)}),5),i=r.map((function(e,t){var n=Object(c.a)(e,2),a=n[0],i=n[1],l=0===t?0:r[t-1][1];return console.assert(a!==1/0||i===l,i,l),a===1/0?{fs:o,bw:l}:{fs:a,bw:i}}));return Object(a.jsxs)(u.a,{width:420,height:230,name:"".concat(t.name," bandwidth function"),margin:{top:5,right:5,left:5,bottom:5},children:[Object(a.jsx)(h.a,{}),n.map((function(e,t){return Object(a.jsx)(f.a,{x:e.maxFairShare,stroke:v,label:{value:e.name+" alloc.",position:"insideTopRight",fill:v},strokeDasharray:"3 3",strokeWidth:.8},t)})),Object(a.jsx)(m.a,{type:"number",dataKey:"fs",domain:[0,5],name:"Fair Share",label:{value:"Fair Share",position:"insideBottom"},height:40,tickCount:11}),Object(a.jsx)(j.a,{type:"number",dataKey:"bw",name:"Bandwidth",label:{value:"Allocated Bandwidth",position:"insideLeft",style:{textAnchor:"middle"},angle:-90},width:40,domain:[0,25],tickCount:6}),Object(a.jsx)(p.a,{}),Object(a.jsx)(b.a,{name:"Fair Share",data:i,fill:t.color,line:{strokeWidth:2.5}}),Object(a.jsx)(f.a,{y:t.estimatedDemand,label:{value:"Est. demand",fill:t.color,position:"insideBottomRight"},stroke:t.color,strokeDasharray:"3 3",strokeWidth:.8,isFront:!0})]})},I=n(55);var B=function(e){var t=e.value,n=e.text,o=e.min,i=e.max,l=e.onDec,s=e.onInc,d=e.width,u=e.thickBottom,h=e.thickRight,f=e.disabled,m=e.disabledInc,j=e.disabledDec,p="1px solid black",b="2px solid black",v={borderBottom:u?b:p,borderRight:h?b:p,textAlign:"center",display:"grid",gridTemplateRows:"auto",gridTemplateColumns:"16px ".concat(d-32,"px 16px"),justifyItems:"stretch",alignItems:"stretch",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"},g=Object(r.useState)(!1),x=Object(c.a)(g,2),O=x[0],y=x[1],w=Object(r.useState)(!1),k=Object(c.a)(w,2),S=k[0],L=k[1],T="#e5e5e5",C="#d0d0d0",I="#fafafa",B="#a5a5a5",D=f||m||t+1>i,R=f||j||t-1<o;return Object(a.jsxs)("div",{style:v,children:[Object(a.jsx)("div",{style:{borderRight:p,color:R?B:"black",backgroundColor:R?I:O?C:T,cursor:R?"not-allowed":"pointer"},onMouseEnter:function(){return y(!0)},onMouseLeave:function(){return y(!1)},onClick:function(){R||l()},children:"-"}),Object(a.jsx)("div",{style:{backgroundColor:"#f6f6f6",alignItems:"stretch",padding:"0.2em"},children:n||(t===1/0?"\u221e":t)}),Object(a.jsx)("div",{style:{borderLeft:p,borderRight:h?b:p,color:D?B:"black",backgroundColor:D?I:S?C:T,cursor:D?"not-allowed":"pointer"},onMouseEnter:function(){return L(!0)},onMouseLeave:function(){return L(!1)},onClick:function(){D||s()},children:"+"})]})};var D=function(e){var t=e.flowGroup,n=e.allocLevels,r=e.handleEstDemand,o=e.handleNumWeightThresholds,i=e.handleWeightThreshold,l=90,s="1px solid black",u="2px solid black",h={borderTop:u,borderLeft:u},f={borderBottom:s,borderRight:s,textAlign:"center",justifySelf:"stretch",alignSelf:"stretch"},m=Object(d.a)({},f);m.fontWeight="bold",m.padding="0.2rem",m.borderBottom=u;var j=Object(d.a)({},m);j.color=t.color,j.borderRight=u;var p=Object(d.a)({},f);p.display="grid",p.gridTemplateRows="auto",p.gridTemplateColumns="1fr 20px 20px",p.alignItems="center";for(var b={justifySelf:"start"},v={cursor:"pointer",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none",fontSize:"18px",paddingTop:"0.2rem"},g="".concat(t.name),x=Object(a.jsx)("div",{style:j,children:g}),O=Object(a.jsx)("div",{style:m,children:"Est. Bandwidth"}),y=Object(a.jsx)(B,{value:t.estimatedDemand,min:0,max:20,onInc:function(){r(!0)},onDec:function(){r(!1)},width:l,thickBottom:!0,thickRight:!0}),w=Object(a.jsxs)("div",{style:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"1fr ".concat(l,"px"),justifyItems:"stretch",alignItems:"stretch",justifyContent:"stretch",width:"".concat(320,"px")},children:[O,y]}),k=["Allocation level","Weight","Bandwidth"],S=k.map((function(e,t){var n=Object(d.a)({},m);return t===k.length-1&&(n.borderRight=u),Object(a.jsx)("div",{style:n,children:e},"h".concat(t))})),L=[],C=1,D=function(e){C+=t.allocLevels[e].length;for(var r=Object(a.jsx)("div",{style:v,onClick:function(){return o(e,!0)},children:Object(a.jsx)(I.a,{})}),s=Object(a.jsx)("div",{style:v,onClick:function(){return o(e,!1)},children:Object(a.jsx)(I.b,{})}),h=function(o){var h=0===o,f=o===t.allocLevels[e].length-1,m=f&&!h,j=f&&o<5,v=Object(c.a)(t.allocLevels[e][o],2),g=v[0],x=v[1],O=h?n[e].name:"",y=Object(d.a)({},p);y.borderBottom=f?u:void 0;var w=Object(a.jsxs)("div",{style:y,children:[Object(a.jsx)("div",{style:b,children:O}),m?s:Object(a.jsx)("div",{}),j?r:Object(a.jsx)("div",{})]},"a".concat(e,"_").concat(o)),k=h?100:t.allocLevels[e][o-1][1],S=f?0:t.allocLevels[e][o+1][1],C=Object(a.jsx)(B,{value:x,min:S,max:k,onInc:function(){i(e,o,!0,!0)},onDec:function(){i(e,o,!0,!1)},disabledInc:T(t,n,e,o,!0,!0),disabledDec:T(t,n,e,o,!0,!1),width:l,thickBottom:f},"w".concat(e,"_").concat(o)),I=f?100:t.allocLevels[e][o+1][0],D=h?0:t.allocLevels[e][o-1][0],R=Object(a.jsx)(B,{value:g,text:Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{style:{color:"gray"},children:"".concat(D,"-")}),Object(a.jsx)("span",{children:"".concat(g===1/0?"\u221e":g)})]}),min:D,max:I,onInc:function(){i(e,o,!1,!0)},onDec:function(){i(e,o,!1,!1)},disabled:g===1/0||0===x,disabledInc:T(t,n,e,o,!1,!0),disabledDec:T(t,n,e,o,!1,!1),width:l,thickBottom:f,thickRight:!0},"b".concat(e,"_").concat(o));L.push(w),L.push(C),L.push(R)},f=0;f<t.allocLevels[e].length;f++)h(f)},R=0;R<n.length;R++)D(R);var A=Object(a.jsxs)("div",{style:{display:"grid",gridTemplateRows:"repeat(".concat(C,", 1fr)"),gridTemplateColumns:"1fr ".concat(l,"px ").concat(l,"px"),justifyItems:"stretch",alignItems:"stretch",justifyContent:"stretch",width:"".concat(320,"px")},children:[S.map((function(e){return e})),L.map((function(e){return e}))]});return Object(a.jsxs)("div",{style:h,children:[x,w,A]})};var R=function(e){var t=e.flowGroups,n=e.allocLevels,r=e.handleEstDemand,o=e.handleNumWeightThresholds,i=e.handleWeightThreshold,l=e.handleNumFlowGroups,c={justifySelf:"start",cursor:"pointer",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"},s=Object(d.a)({},c);s.justifySelf="end";var u=Object(a.jsx)("div",{style:c,onClick:function(){return l(!0)},children:Object(a.jsx)(I.a,{})}),h=Object(a.jsx)("div",{style:s,onClick:function(){return l(!1)},children:Object(a.jsx)(I.b,{})});return Object(a.jsxs)("div",{children:[t.map((function(e,t){return Object(a.jsxs)("div",{style:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"auto auto",columnGap:"10px",alignItems:"center"},children:[Object(a.jsx)(D,{flowGroup:e,allocLevels:n,handleEstDemand:function(e){return r(t,e)},handleNumWeightThresholds:function(e,n){return o(t,e,n)},handleWeightThreshold:function(e,n,a,r){return i(t,e,n,a,r)}}),Object(a.jsx)(C,{flowGroup:e,allocLevels:n})]},t)})),Object(a.jsxs)("div",{style:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 2fr",columnGap:"20px",justifyItems:"start",alignItems:"center",justifyContent:"start",fontSize:"24px"},children:[t.length>1?h:Object(a.jsx)("div",{}),t.length<6?u:Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})]})};var A=function(e){for(var t=e.flowGroups,n=e.allocLevels,r=t.map((function(e){return y(e,n)})),o=S(r),i=o.reduce((function(e,t){var n=Object(c.a)(t,2),a=(n[0],n[1]);return a===1/0?e:Math.max(e,a+1)}),5),l=o.map((function(e,t){var n=Object(c.a)(e,2),a=n[0],r=n[1],l=0===t?0:o[t-1][0];return r===1/0?{fs:i,cap:l}:{fs:r,cap:a}})),s=t.reduce((function(e,t){return e+t.estimatedDemand}),0),d=Math.max(s+5,40),g=L(r).map((function(e){return e.map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return n===1/0?{cap:d,allocBw:a}:{cap:n,allocBw:a}}))})),x=[],O=0;O<=d;O+=2.5)x.push(O);for(var w=[],k=0;k<=i;k+=.5)w.push(k);for(var T=[],C=0;C<=25;C+=2.5)T.push(C);return Object(a.jsxs)(u.a,{width:644,height:390,name:"Available vs allocated bandwidth",margin:{top:5,right:5,left:5,bottom:5},children:[Object(a.jsx)(h.a,{}),Object(a.jsx)(m.a,{type:"number",dataKey:"cap",domain:[0,d],label:{value:"Link Capacity",position:"insideBottom"},height:40,name:"Link Capacity",ticks:x,minTickGap:2}),Object(a.jsx)(j.a,{type:"number",dataKey:"allocBw",domain:[0,i],name:"Allocated Bandwidth",label:{value:"Allocated Bandwidth",position:"insideLeft",style:{textAnchor:"middle"},angle:-90},width:50,ticks:T,orientation:"left",minTickGap:0,interval:0,yAxisId:"left"}),Object(a.jsx)(j.a,{type:"number",dataKey:"fs",domain:[0,i],name:"Fair Share",label:{value:"Fair Share",position:"insideRight",style:{textAnchor:"middle"},angle:-90},width:50,ticks:w,orientation:"right",minTickGap:0,interval:0,yAxisId:"right"}),Object(a.jsx)(p.a,{}),Object(a.jsx)(b.a,{name:"Fair Share",data:l,fill:v,line:{strokeWidth:2},shape:"cross",yAxisId:"right"}),g.map((function(e,n){return Object(a.jsx)(b.a,{name:"Allocated Bandwidth",data:e,fill:t[n].color,line:{strokeWidth:2.5},yAxisId:"left"},"ab".concat(n))})),t.map((function(e,t){return Object(a.jsx)(f.a,{y:e.estimatedDemand,yAxisId:"left",label:{value:"Est. demand",fill:e.color,position:"insideBottomLeft"},stroke:e.color,strokeDasharray:"3 3",strokeWidth:.8,isFront:!0},"ed".concat(t))})),n.map((function(e,t){return Object(a.jsx)(f.a,{y:e.maxFairShare,yAxisId:"right",stroke:v,label:{value:e.name+" alloc.",position:"insideTopRight",fill:v},strokeDasharray:"3 3",strokeWidth:.8},"alloc".concat(t))}))]})};var F=function(e){for(var t=e.allocLevels,n=["Allocation Level","Fair Share"],r=[],o=0;o<t.length;o++){r.push(t[o].name);var i=0===o?0:t[o-1].maxFairShare,l=t[o].maxFairShare;r.push("".concat(i,"-").concat(l===1/0?"\u221e":l))}var c="2px solid black",s={borderTop:c,borderLeft:c},u={padding:"0.2em",borderBottom:c,borderRight:c,textAlign:"center"},h=Object(d.a)({},u);h.fontWeight="bold";for(var f=[],m=0;m<n.length;m+=1)f.push(Object(a.jsx)("div",{style:h,children:n[m]},"h".concat(m)));for(var j=0;j<r.length;j+=1)f.push(Object(a.jsx)("div",{style:u,children:r[j]},"e".concat(j)));return Object(a.jsx)("div",{style:s,children:Object(a.jsx)("div",{style:{display:"grid",gridTemplateRows:"repeat(".concat(t.length+1,", 1fr)"),gridTemplateColumns:"auto auto"},children:f.map((function(e){return e}))})})},G=function(){var e=O("flowGroup1","#6864b8",15,2);return e.allocLevels[1][0]=[10,20],e.allocLevels[1].push([1/0,5]),e},W=function(){var e=O("flowGroup2","#62aa7d",20,2);return e.allocLevels[0][0]=[10,10],e.allocLevels[1][0][1]=10,e},E=["#6864b8","#62aa7d","#DEA200","#CC33CC","#0061CD","#BC1E46"];var M=function(){var e=Object(s.a)([{name:"Guaranteed",maxFairShare:2},{name:"Best Effort",maxFairShare:1/0}]),t=Object(c.a)(e,2),n=t[0],r=(t[1],Object(s.a)([G(),W()])),o=Object(c.a)(r,2),i=o[0],l=o[1],d={display:"grid",gridTemplateRows:"auto auto",gridTemplateColumns:"auto",rowGap:"20px",justifyItems:"center",alignItems:"center",justifyContent:"center"},u=d;return Object(a.jsxs)("div",{style:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"auto auto",columnGap:"20px",justifyItems:"start",alignItems:"center",justifyContent:"start",marginLeft:"15px",marginTop:"15px"},children:[Object(a.jsxs)("div",{style:d,children:[Object(a.jsx)(F,{allocLevels:n}),Object(a.jsx)(R,{flowGroups:i,allocLevels:n,handleEstDemand:function(e,t){l((function(n){var a=n[e];t?a.estimatedDemand<20&&(a.estimatedDemand+=1):a.estimatedDemand>0&&(a.estimatedDemand-=1)}))},handleNumWeightThresholds:function(e,t,n){l((function(a){var r=a[e],o=t===r.allocLevels.length-1,i=r.allocLevels[t],l=i.length;if(!n){if(l<2)return;return i.pop(),void(o&&(i[l-2][0]=1/0))}if(0===l)i.push([o?1/0:0,0]);else{var s=Object(c.a)(i[l-1],2),d=s[0],u=s[1];i.push([d,u]),o&&(i[l-1][0]=1===l?0:i[l-2][0])}}))},handleWeightThreshold:function(e,t,n,a,r){l((function(o){var i=o[e].allocLevels[t][n];r?a?i[1]+=1:i[0]+=1:a?i[1]-=1:i[0]-=1}))},handleNumFlowGroups:function(e){l((function(t){var a=t.length;if(e){if(6===a)return;t.push(O("flowGroup".concat(a+1),E[a],1,n.length))}else{if(1===a)return;t.pop()}}))}})]}),Object(a.jsxs)("div",{style:u,children:[Object(a.jsx)("div",{style:{fontSize:"24px"},children:"Bandwidth function aggregation"}),Object(a.jsx)(A,{flowGroups:i,allocLevels:n})]})]})};l.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(M,{})}),document.getElementById("root"))}},[[305,1,2]]]);
//# sourceMappingURL=main.008d64df.chunk.js.map