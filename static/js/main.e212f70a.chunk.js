(this["webpackJsonpbandwidth-enforcer-plotter"]=this["webpackJsonpbandwidth-enforcer-plotter"]||[]).push([[0],{177:function(e,t,a){},178:function(e,t,a){},314:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(0),o=a.n(r),i=a(72),l=a.n(i),c=(a(177),a(16)),s=a(108),d=(a(178),a(319)),u=a(318),b=a(153),h=a(160),j=a(161),m=a(86),p=a(166),f="red",v=function(e,t){for(var a=[],n=0,r=0,o=e.allocLevels,i=0;i<t.length;i++){a.push([n,r]);for(var l=0,s=0;s<o[i].length;s++){var d=Object(c.a)(o[i][s],2),u=d[0],b=d[1],h=Math.min(u-l,e.estimatedDemand-r);l=u,b>0&&(r+=h,n+=h/b,a.push([n,r]))}n=t[i].maxFairShare}return a.push([1/0,e.estimatedDemand]),a},O=function(e,t){for(var a=0;e[a][0]<t;)a++;return e[a][0]===t||e[a][0]===1/0?e[a][1]:function(e,t,a){var n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(c.a)(a,2),l=i[0];return o+(e-r)*(i[1]-o)/(l-r)}(t,e[a-1],e[a])},x=function(e,t){for(var a=0,n=0;n<e.length;n++)a+=O(e[n],t);return a},g=function(e){for(var t=new Set,a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)t.add(e[a][n][0]);return(t=Array.from(t)).sort(),t},w=function(e,t){for(var a=e.map((function(e){return v(e,t)})),n=g(a),r=[],o=0;o<n.length;o++){var i=n[o],l=x(a,i);r.push([l,i])}return r},y=function(e,t){for(var a=e.map((function(e){return v(e,t)})),n=w(e,t),r=g(a),o=[],i=0;i<n.length;i++){var l=Object(c.a)(n[i],2),s=l[0],d=l[1];0!==i&&d===n[i-1][1]||o.push(s)}for(var u=[],b=0;b<a.length;b++){for(var h=[],j=0;j<r.length;j++){var m=o[j];0!==j&&m===o[j-1]||h.push([o[j],O(a[b],r[j])])}h.push([1/0,h[h.length-1][1]]),u.push(h)}return u};var k=function(e){var t=e.flowGroup,a=e.allocLevels,r=v(t,a);return r=r.map((function(e){var t=Object(c.a)(e,2),a=t[0];return{fs:a===1/0?5:a,bw:t[1]}})),Object(n.jsxs)(d.a,{width:420,height:230,name:"".concat(t.name," bandwidth function"),margin:{top:5,right:5,left:5,bottom:5},children:[Object(n.jsx)(u.a,{}),a.map((function(e,t){return Object(n.jsx)(b.a,{x:e.maxFairShare,stroke:f,label:{value:e.name+" alloc.",position:"insideTopRight",fill:f},strokeDasharray:"3 3",strokeWidth:.8},t)})),Object(n.jsx)(h.a,{type:"number",dataKey:"fs",domain:[0,5],name:"Fair Share",label:{value:"Fair Share",position:"insideBottom"},height:40,tickCount:11}),Object(n.jsx)(j.a,{type:"number",dataKey:"bw",name:"Bandwidth",label:{value:"Allocated Bandwidth",position:"insideLeft",style:{textAnchor:"middle"},angle:-90},width:40,domain:[0,25],tickCount:6}),Object(n.jsx)(m.a,{}),Object(n.jsx)(p.a,{name:"Fair Share",data:r,fill:t.color,line:{strokeWidth:2.5}}),Object(n.jsx)(b.a,{y:t.estimatedDemand,label:{value:"Est. demand",fill:t.color,position:"insideBottomRight"},stroke:t.color,strokeDasharray:"3 3",strokeWidth:.8,isFront:!0})]})},L=a(15),A=a(79),G=a(81),S=a(80);function T(){var e=Object(A.a)(["\n  padding: 0;\n\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.2rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n      text-align: center;\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n"]);return T=function(){return e},e}var I=G.a.div(T());function B(e){var t=e.columns,a=e.data,r=Object(S.useTable)({columns:t,data:a}),o=r.getTableProps,i=r.getTableBodyProps,l=r.headerGroups,c=r.rows,s=r.prepareRow;return Object(n.jsxs)("table",Object(L.a)(Object(L.a)({},o()),{},{children:[Object(n.jsx)("thead",{children:l.map((function(e){return Object(n.jsx)("tr",Object(L.a)(Object(L.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsx)("th",Object(L.a)(Object(L.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(n.jsx)("tbody",Object(L.a)(Object(L.a)({},i()),{},{children:c.map((function(e,t){return s(e),Object(n.jsx)("tr",Object(L.a)(Object(L.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(L.a)(Object(L.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))}var F=function(e){var t=e.flowGroup,a=e.allocLevels,r=o.a.useMemo((function(){return[{Header:"".concat(t.name," (").concat(t.estimatedDemand," est. demand)"),columns:[{Header:"Allocation Level",accessor:"allocLevel"},{Header:"Weight",accessor:"weight"},{Header:"Bandwidth",accessor:"bandwidth"}]}]}),[t]),i=o.a.useMemo((function(){return function(e,t){for(var a=[],n=0;n<t.length;n++)for(var r=0;r<e.allocLevels[n].length;r++){var o=e.allocLevels[n][r][0];a.push({allocLevel:0===r?t[n].name:"",bandwidth:o===1/0?"\u221e":o,weight:e.allocLevels[n][r][1],subRows:void 0})}return a}(t,a)}),[t,a]);return Object(n.jsx)(I,{children:Object(n.jsx)(B,{columns:r,data:i})})};var H=function(e){var t=e.flowGroups,a=e.allocLevels;return Object(n.jsx)("div",{children:t.map((function(e,t){return Object(n.jsxs)("div",{style:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"auto auto",columnGap:"5px",justifyItems:"start",alignItems:"center",justifyContent:"start"},children:[Object(n.jsx)(F,{flowGroup:e,allocLevels:a}),Object(n.jsx)(k,{flowGroup:e,allocLevels:a})]},t)}))})};var R=function(e){for(var t=e.flowGroups,a=e.allocLevels,r=w(t,a).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return{bw:a,fs:n===1/0?5:n}})),o=y(t,a).map((function(e){return e.map((function(e){var t=Object(c.a)(e,2),a=t[0];return{bw:a===1/0?40:a,albw:t[1]}}))})),i=[],l=0;l<=40;l+=2.5)i.push(l);for(var s=[],v=0;v<=5;v+=.5)s.push(v);for(var O=[],x=0;x<=25;x+=2.5)O.push(x);return Object(n.jsxs)(d.a,{width:644,height:390,name:"Available vs allocated bandwidth",margin:{top:5,right:5,left:5,bottom:5},children:[Object(n.jsx)(u.a,{}),Object(n.jsx)(h.a,{type:"number",dataKey:"bw",domain:[0,40],label:{value:"Available Bandwidth",position:"insideBottom"},height:40,name:"Available Bandwidth",ticks:i,minTickGap:2}),Object(n.jsx)(j.a,{type:"number",dataKey:"albw",domain:[0,5],name:"Allocated Bandwidth",label:{value:"Allocated Bandwidth",position:"insideLeft",style:{textAnchor:"middle"},angle:-90},width:50,ticks:O,orientation:"left",minTickGap:0,interval:0,yAxisId:"left"}),Object(n.jsx)(j.a,{type:"number",dataKey:"fs",domain:[0,5],name:"Fair Share",label:{value:"Fair Share",position:"insideRight",style:{textAnchor:"middle"},angle:-90},width:50,ticks:s,orientation:"right",minTickGap:0,interval:0,yAxisId:"right"}),Object(n.jsx)(m.a,{}),Object(n.jsx)(p.a,{name:"Fair Share",data:r,fill:f,line:{strokeWidth:2},shape:"cross",yAxisId:"right"}),o.map((function(e,a){return Object(n.jsx)(p.a,{name:"Allocated Bandwidth",data:e,fill:t[a].color,line:{strokeWidth:2.5},yAxisId:"left"},"ab".concat(a))})),t.map((function(e,t){return Object(n.jsx)(b.a,{y:e.estimatedDemand,yAxisId:"left",label:{value:"Est. demand",fill:e.color,position:"insideBottomLeft"},stroke:e.color,strokeDasharray:"3 3",strokeWidth:.8,isFront:!0},"ed".concat(t))})),a.map((function(e,t){return Object(n.jsx)(b.a,{y:e.maxFairShare,yAxisId:"right",stroke:f,label:{value:e.name+" alloc.",position:"insideTopRight",fill:f},strokeDasharray:"3 3",strokeWidth:.8},"alloc".concat(t))}))]})};function C(){var e=Object(A.a)(["\n  padding: 0;\n\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.2rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n      text-align: center;\n\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n"]);return C=function(){return e},e}var P=G.a.div(C());function D(e){var t=e.columns,a=e.data,r=Object(S.useTable)({columns:t,data:a}),o=r.getTableProps,i=r.getTableBodyProps,l=r.headerGroups,c=r.rows,s=r.prepareRow;return Object(n.jsxs)("table",Object(L.a)(Object(L.a)({},o()),{},{children:[Object(n.jsx)("thead",{children:l.map((function(e){return Object(n.jsx)("tr",Object(L.a)(Object(L.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsx)("th",Object(L.a)(Object(L.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(n.jsx)("tbody",Object(L.a)(Object(L.a)({},i()),{},{children:c.map((function(e,t){return s(e),Object(n.jsx)("tr",Object(L.a)(Object(L.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(L.a)(Object(L.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))}var W=function(e){var t=e.allocLevels,a=o.a.useMemo((function(){return[{Header:"Allocation levels",columns:[{Header:"",accessor:"allocLevel"},{Header:"Fair Share",accessor:"fairShare"}]}]}),[]),r=o.a.useMemo((function(){return function(e){for(var t=[],a=0;a<e.length;a++){var n=0===a?0:e[a-1].maxFairShare,r=e[a].maxFairShare;t.push({allocLevel:e[a].name,fairShare:"".concat(n,"-").concat(r===1/0?"\u221e":r),subRows:void 0})}return t}(t)}),[t]);return Object(n.jsx)(P,{children:Object(n.jsx)(D,{columns:a,data:r})})},M=["#6864b8","#62aa7d"],K=function e(t){e.colorIdx=void 0===e.colorIdx?0:(e.colorIdx+1)%M.length;for(var a=[],n=0;n<t-1;n++)a[n]=[[0,0]];return a.push([[1/0,0]]),{name:"",color:M[e.colorIdx],estimatedDemand:0,allocLevels:a}},E=function(e,t){e.name=t},J=function(e,t){e.estimatedDemand=t},q=function(e,t,a,n){e.allocLevels[t][a][0]=n},z=function(e,t,a,n){e.allocLevels[t][a][1]=n},N=function(){var e,t,a,n=K(2);return E(n,"fg1"),J(n,15),q(n,1,0,10),z(n,1,0,20),e=1,t=1/0,a=5,n.allocLevels[e].push([t,a]),n},Q=function(){var e=K(2);return E(e,"fg2"),J(e,20),q(e,0,0,10),z(e,0,0,10),z(e,1,0,10),e};var U=function(){var e=Object(s.a)([{name:"Guaranteed",maxFairShare:2},{name:"Best Effort",maxFairShare:1/0}]),t=Object(c.a)(e,2),a=t[0],r=(t[1],Object(s.a)([N(),Q()])),o=Object(c.a)(r,2),i=o[0];return o[1],Object(n.jsxs)("div",{style:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"auto auto",columnGap:"20px",justifyItems:"start",alignItems:"center",justifyContent:"start",marginLeft:"15px",marginTop:"15px"},children:[Object(n.jsxs)("div",{style:{display:"grid",gridTemplateRows:"auto auto",gridTemplateColumns:"auto",rowGap:"15px",justifyItems:"center",alignItems:"center",justifyContent:"center"},children:[Object(n.jsx)(W,{allocLevels:a}),Object(n.jsx)(H,{flowGroups:i,allocLevels:a})]}),Object(n.jsx)(R,{flowGroups:i,allocLevels:a})]})};l.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(U,{})}),document.getElementById("root"))}},[[314,1,2]]]);
//# sourceMappingURL=main.e212f70a.chunk.js.map